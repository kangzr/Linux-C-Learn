#### 第一章：概述

##### 分层

- 链路层，数据链路层或网络接口层，通常包括操作系统中的设备驱动程序和计算机中对应的网络接口卡，它们一起处理与电缆（传输媒介）的物理接口细节
- 网络层，处理分组在网络中的活动。网络层协议包括IP协议，ICMP协议，IGMP协议
- 运输层：为两台主机上的应用程序提供端对端通信，包括TCP协议，UDP协议
- 应用层：负责处理特定的应用程序细节。比如Telnet远程登录，FTP文件传输协议，SMTP简单邮件传输协议

网络层IP提供不可靠服务（点到点），尽可能快第把分组从源节点发到目的结点。TCP在不可靠的IP层上提供了一个可靠的运输层（端对端）。为提供这种可靠服务，TCP采用超时重传，延时确认等机制。

网桥是在链路层对网络进行互连，路由器是在网络层上对网络进行互连。网桥使得多个局域网LAN组合在一起，这样对上层来说就像一个局域网。



##### 五类互联网地址

A类(0)：7位网络号24位主机号；

B类(10)：14位网络号16位主机号

C类(110)：21位网络号8位主机号

D类(1110)

E类(11110)

##### DNS域名系统

：分布数据库，提供IP地址和主机名之间的映射信息。

##### 封装

TCP：TCP报文段 Tcp segment

IP: IP数据报 IP datagram

以太网：帧Frame, 46 ~ 1500

##### RFC

所有关于Internet的正式标准都以RFC(Request for Comment)文档出版



---



#### 第二章 链路层

链路层目的：

- 为IP模块发送和接收IP数据报
- 为ARP模块发送ARP请求和接收ARP应答
- 为RARP模块发送RARP请求和接收ARP应答

##### 以太网和IEEE 802封装

<img src="..\pic\tcp_ip_lianlu.png" alt="tcp_ip_lianlu" style="zoom:75%;" />

6个字节的目的地址和源地址，即48 bit的硬件地址(mac地址)

2个字节的类型用于标记是IP协议，ARP协议还是RARP协议

中间46~1500字节的数据报，最后4个字节的CRC字段用于帧内后续字节差错的循环冗余码检验（检验和），也被称为FCS或帧检验序列



##### SLIP：串行线路IP

Serial Line IP，是一种在串行线路上对IP数据报进行封装的简单形式。

##### CSLIP：压缩的SLIP

##### PPP：点对点协议



##### 最大传输单元MTU

如果IP层有一个数据报要传，而且数据的长度比链路层的MTU大，那么IP层就需要进行分片（fragmentation），把数据分层若干片。

##### 路径MTU：木桶原理



---



#### 第3章 IP：网际协议

不可靠：IP协议不能保证IP数据包能成功到达目的地，仅提供最好的传输服务

无连接：不维护任何关于后续数据报的状态信息。每个数据报的处理是相互独立的，可能选择不同的路线。

网络字节序==大端字节序

##### IP首部：

TOS，前3 bit 忽略，接下来 4 bit分别表示最小延时，最大吞吐量，最高可靠性和最小费用（只能由一个bit置1），最后1 bit未用，必须置0

16位总长度：IP数据包长度，16个bit，最长可达65535字节。

TTL：生存时间字段设置了数据报可以经过的最多路由器数，指定了数据报的生存时间。经过一个路由器TTL减一，为0时数据报被丢弃，并发送ICMP报文通知源主机。

链路层的目的地址始终为下一战的链路层地址。

##### 子网寻址

不是把IP地址看成由单纯的一个网络号和一个主机号组成，而是把主机号再分成一个子网号和一个主机号。

##### 子网掩码

P37











































