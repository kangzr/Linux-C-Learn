UDP可靠性传输

**可靠性传输**

 ack机制

重传机制

序号机制 重排机制

**tcp和udp**

什么时候选择使用udp？

实时要求比较高的：直播、音视频通话、游戏

短连接：物联网  传感器(一分钟采集一次数据)

大规模服务器心跳包的设计，

**可靠性udp设计**（KCP）

目的是解决什么问题：主要解决延迟问题。(用带宽换延时)

重传间隔RTO：（100， 200， 400 ....）

快速重传：跳过多少个包马上重传，使用快速重传，不考虑RTO



**慢启动与非退让**

慢启动：TCP 大公无私，尽量少占带宽，慢启动（刚开始会有带宽浪费, ）

非退让：自私自利，尽量为自己谋福利，多占带宽。（因为带宽一直在提速）



最大传输单元MTU

重传超时时间RTO



KCP



recvfrom后，扔到kcp做解析



http, ftp等使用TCP，确保可靠性；而视频、在线游戏多使用UDP，确保实时性。 (有的游戏使用kcp协议，它是一个快速可靠协议，**能以比TCP浪费10-20%的带宽为代价**，**换取平均延迟降低30-40%，且最大延迟降低三倍的效果。**

TCP为流量设计，讲究充分利用带宽，KCP为流速设计，10%-20%带宽浪费的代价换取了比 TCP快30%-40%的传输速度。TCP信道是一条流速很慢，但每秒流量很大的大运河，而KCP是水流湍急的小激流

